// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum FieldType {
  COURT
  GRASSFIELD
}

enum Sport {
  BASKETBALL
  FOOTBALL
}

enum Day {
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
  SATURDAY
  SUNDAY
}

model User {
  id        String  @id @default(uuid())
  name      String  @db.VarChar(255)
  email     String  @unique @db.VarChar(255)
  username  String  @unique @db.VarChar(50)
  telephone String
  addressId String?
  avatar    String? @db.VarChar(255)

  Address Address? @relation(fields: [addressId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model Address {
  id           String  @id @default(uuid())
  street       String  @db.VarChar(255)
  number       String  @db.VarChar(10)
  complement   String? @db.VarChar(100)
  neighborhood String  @db.VarChar(255)
  city         String  @db.VarChar(255)
  state        String  @db.VarChar(255)
  country      String  @db.VarChar(255)
  zipcode      String  @db.VarChar(50)
  longitude    String? @db.VarChar(255)
  latitude     String? @db.VarChar(255)

  User User[]
  Spot Spot[]
}

model Spot {
  id        String  @id @default(uuid())
  name      String
  logo      String
  addressId String?

  Field        Field[]
  WorkingHours workingHour[]
  Address      Address?      @relation(fields: [addressId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model Field {
  id       String    @id @default(uuid())
  name     String
  capacity Int
  spotId   String
  type     FieldType
  sport    Sport

  Spot Spot @relation(fields: [spotId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model workingHour {
  id        Int    @id @default(autoincrement())
  day       Day
  openHour  String
  closeHour String
  spotId    String

  Spot Spot @relation(fields: [spotId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@unique([spotId, day])
}
